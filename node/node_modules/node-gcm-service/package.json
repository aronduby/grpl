{
  "name": "node-gcm-service",
  "version": "0.2.8",
  "description": "Node.js wrapper to send notification to Android devices using Google Cloud Messaging service",
  "author": {
    "name": "Ismael Gorissen",
    "email": "ismael.gorissen@pinchproject.com"
  },
  "keywords": [
    "gcm",
    "google",
    "cloud",
    "messaging",
    "google cloud messaging",
    "push",
    "notification",
    "android"
  ],
  "dependencies": {
    "attempt": "1.0.0",
    "debug": "0.7.2",
    "async": "0.2.9",
    "request": "2.25.0"
  },
  "main": "./libs/index",
  "directories": {
    "lib": "libs"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/PinchProject/Node-GCMService.git"
  },
  "bugs": {
    "url": "https://github.com/PinchProject/Node-GCMService/issues"
  },
  "readme": "# Node-GCMService\r\n\r\n[![NPM](https://nodei.co/npm/node-gcm-service.png?downloads=true&stars=true)](https://nodei.co/npm/node-gcm-service/)\r\n\r\n[![NPM](https://nodei.co/npm-dl/node-gcm-service.png?months=1)](https://nodei.co/npm/node-gcm-service/)\r\n\r\n## Description\r\n\r\nNode.js wrapper to send notification to Android devices using Google Cloud Messaging service.\r\n\r\n## Badges\r\n\r\n![dependencies](https://david-dm.org/PinchProject/Node-GCMService.png)\r\n\r\n## Installation\r\n\r\n```\r\nnpm install node-gcm-service\r\n```\r\n\r\n## Requirements\r\n\r\nThe only thing you need is a google server api key. For more information go to [GCM getting started guide](http://developer.android.com/google/gcm/gs.html).\r\n\r\n## Usage\r\n\r\nRequire the module\r\n\r\n```javascript\r\nvar gcm = require('node-gcm-service');\r\n```\r\n\r\nCreate a message object with default values and set all variables after, or with another object:\r\n\r\n*with default values:*\r\n\r\n```javascript\r\nvar message = new gcm.Message();\r\n\r\n// set data with another object\r\nmessage.setDataWithObject({\r\n\tkey1: 'value1'\r\n});\r\n\r\n// add new key-value to data if key does not exists\r\nmessage.addDataWithKeyValue('key2','value2');\r\n\r\n// set collapse key\r\nmessage.setCollapseKey('string');\r\n\r\n// set dry run\r\nmessage.setDryRun(false);\r\n\r\n// set delay while idle\r\nmessage.setDelayWhileIdle(true);\r\n```\r\n\r\n*with another object (undefined variables will be set with the default values)*\r\n\r\n```javascript\r\nvar message = new gcm.Message({\r\n\tcollapse_key: 'test',\r\n\tdata: {\r\n\t\tkey1: 'value1'\r\n\t},\r\n\tdelay_while_idle: true,\r\n\ttime_to_live: 34,\r\n\tdry_run: false\r\n});\r\n```\r\n\r\nCreate a sender object with default values and set the api key after, or with another object:\r\n\r\n*with default values*\r\n\r\n```javascript\r\nvar sender = new gcm.Sender();\r\n\r\n// set api key\r\nsender.setAPIKey('key');\r\n```\r\n\r\n*with another object*\r\n\r\n```javascript\r\nvar sender = new gcm.Sender({\r\n\tkey: 'my_api_key'\r\n});\r\n```\r\n\r\n**Important** : you can set the endpoint and end path URLs if Google change these URLs\r\n\r\nAnd finally send the message to the specified registration id(s) with retries or not, in JSON format or plain-text format :\r\n\r\n*with retries in JSON format*\r\n\r\n```javascript\r\nsender.sendMessage(message.toJSON(), registration_ids, true, function(err, data) {\r\n\tif (!err) {\r\n\t\t// do something\r\n\t} else {\r\n\t\t// handle error\r\n\t}\r\n});\r\n```\r\n\r\n*without retries in plain-text format*\r\n\r\n```javascript\r\nsender.sendMessage(message.toString(), registration_ids, false, function(err, data) {\r\n\tif (!err) {\r\n\t\t// do something\r\n\t} else {\r\n\t\t// handle error\r\n\t}\r\n});\r\n```\r\n\r\n### GCM Response\r\n\r\n#### Multicast (JSON response)\r\n\r\n*GCM Response*\r\n\r\n```javascript\r\n{\r\n\t\"multicast_id\": 216,\r\n\t\"success\": 3,\r\n\t\"failure\": 3,\r\n\t\"canonical_ids\": 1,\r\n\t\"results\": [\r\n\t\t{ \"message_id\": \"1:0408\" },\r\n\t\t{ \"error\": \"Unavailable\" },\r\n\t\t{ \"error\": \"InvalidRegistration\" },\r\n\t\t{ \"message_id\": \"1:1516\" },\r\n\t\t{ \"message_id\": \"1:2342\", \"registration_id\": \"32\" },\r\n\t\t{ \"error\": \"NotRegistered\"}\r\n\t]\r\n}\r\n```\r\n\r\n*Module Response*\r\n\r\n```javascript\r\n{\r\n\t\"multicast_id\": 216,\r\n\t\"success_length\": 3,\r\n\t\"failures_length\": 3,\r\n\t\"failures\": {\r\n\t\t\"NotRegistered\": [\"42\"],\r\n\t\t\"Unavailable\": [\"8\"],\r\n\t\t\"InvalidRegistration\": [\"15\"]\r\n\t},\r\n\t\"canonical_ids_length\": 1,\r\n\t\"canonical_ids\": [\r\n\t\t{\r\n\t\t\t\"message_id\": \"1:2342\",\r\n\t\t\t\"registration_id\": \"23\",\r\n\t\t\t\"new_registration_id\": \"32\"\r\n\t\t}\r\n\t]\r\n}\r\n```\r\n\r\nModule response will always include the sub keys for failures, initialized as empty arrays, to save a lot of checking\r\n\r\n#### Simple (plain-text response)\r\n\r\n*GCM response*\r\n\r\n```\r\nid=1:2342\r\nregistration_id=32\r\n```\r\n\r\n*module response*\r\n\r\n```javascript\r\n{\r\n\t\"id\": \"1:2342\",\r\n\t\"registration_id\": \"32\"\r\n\t\"old_registration_id\": \"14\"\r\n}\r\n```\r\n\r\n### Message class methods\r\n\r\n* **`toJSON()`** : JSON representation of the object\r\n* **`toString()`** : String representation of the object\r\n* **`addNewKeyValue('key', 'value')`** : add key-value in data object, return false if key can not be added\r\n* **`setDataWithObject({â€¦})`** : set data object with a new object\r\n* **`setCollapseKey('key')`** : set collapse_key\r\n* **`setDryRun(true|false)`** : set dry_run\r\n* **`setRestrictedPackageName('package_name')`** : set restricted_package_name\r\n* **`setTimeToLive(12345)`** : set time_to_live\r\n* **`setDelayWhileIdle(true|false)`** : set delay_while_idle\r\n\r\n### Sender class methods\r\n\r\n* **`setAPIKey('key')`** : set api key\r\n* **`setGCMEndpoint('endpoint')`** : set GCM endpoint (default: https://android.googleapis.com)\r\n* **`setGCMEndPath('endpath')`** : set GCM end path (default: /gcm/send)\r\n* **`sendMessage(message, registration_ids, retries, callback)`** : send the notification to the registration id(s) with or without retries in JSON or plain-text format and return the response data or an error\r\n* **`setBackoffDelay(value)`** : set the back-off delay in milliseconds (default: 1000)\r\n* **`setBackoffFactor(value)`** : set the back-off factor by which the back-off delay should be multiplied per attempt (default: 1.2)\r\n* **`setAttempts(value)`** : set the number of retries\r\n\r\n## License\r\n\r\n(The MIT License)\r\n\r\nCopyright (C) 2013 PinchProject\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n## Credits\r\n\r\nThis module was written based on [node-gcm](https://github.com/ToothlessGear/node-gcm)\r\n\r\n## Change log\r\n\r\n<<<<<<< HEAD\r\n#### v0.2.7\r\n\r\n* fix bug when including module (ignoring all files named `index.js` is not a good idea)\r\n=======\r\n#### v0.2.8\r\n\r\n* fix a bug with an `if` statement condition\r\n>>>>>>> release/v0.2.8\r\n\r\n#### v0.2.6\r\n\r\n* using `request` module v2.25.0 to avoid parsing error\r\n* add `details` attribute on Error object when Google GCM server respond with `400: BAD_REQUEST`\r\n* code refactoring\r\n* update modules\r\n* update documentation\r\n\r\n#### v0.2.3\r\n\r\n* update request module version\r\n\r\n#### v0.2.1\r\n\r\n* add the old registration_id to the plain-text response object\r\n\r\n#### v0.2.0\r\n\r\n* split-up the registration_ids array from the message class\r\n* send notification to more than 1000 devices and return a unified result\r\n\r\n#### v0.1.4\r\n\r\n* update documentation\r\n* rename files to resolve an issue\r\n* when creating a new Message or Sender object with another object, more checks have been added (check all object property) and default value will be used if object property does not exists\r\n\r\n#### v0.1.3\r\n\r\n* resolved some issue.\r\n\r\n#### v0.1.2\r\n\r\n* modified the structure of the GCM response (JSON or plain-text).\r\n\r\n#### v0.1.1\r\n\r\n* update documentation.\r\n\r\n#### v0.1.0\r\n\r\n* first release.\r\n",
  "readmeFilename": "README.md",
  "homepage": "https://github.com/PinchProject/Node-GCMService",
  "_id": "node-gcm-service@0.2.8",
  "dist": {
    "shasum": "04ed265116161e2c52b42fc444a945bd8d991c84"
  },
  "_resolved": "git://github.com/aronduby/node-gcm-service#e594f5121a81351560bb03ec59fa828339af544a",
  "_from": "git://github.com/aronduby/node-gcm-service",
  "_fromGithub": true
}
